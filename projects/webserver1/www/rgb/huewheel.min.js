/*
 *	Hue Wheel 1.1.2
 *
 *	(c) 2013-2015 Epistemex
 *	www.epistemex.com
 *
 *	License: MIT
*/
function HueWheel(B,aH){aH=aH||{};if(ah(B)){B=document.getElementById(B)}var aB=this,aF=navigator.msPointerEnabled,j=document.createElement("canvas"),D=document.createElement("canvas"),s=j.getContext("2d"),E=D.getContext("2d"),M=360*(aH.quality||2),N=360/M,L=E.createLinearGradient(0,0,M,0),aa,z,A=0.5*Math.PI,v=Math.PI/180,aK=180/Math.PI,aI=2*Math.PI,a6=250,O=a6,t=a6*0.5,u=t,d=0,aY=!0,ae=!0,a2=!0,a3=!0,aT=1,aw=0.5,a1=!0,U=1,aS=1,at=1,T=33,S=34,aR=37,aQ=39,ar=38,aq=40,am=10,aZ=Math.max(a6*0.12,3),aA=a2?Math.max(a6*0.05,3):0,an=0.1,aX=0,Y=!1,q=0.8,n=2,p="#000",W="#fff",au="#fff",X="#777",av="#777",ap=!1,a=!0,P,ay,ax,az,V,Z,ao,ad=!1,af=!1,ai=!1,a0,a7,a8,aJ,C,e,al,aj,aG;al=Object.keys(aH);for(Z=0;aj=al[Z];Z++){aG=aH[aj];switch(aj){case"diameter":if(ag(aG)){a6=O=aH.diameter}t=a6*0.5;u=t;break;case"hue":if(ag(aG)){d=aG%360}break;case"colorSpace":if(ah(aG)&&(aG==="hsl"||aG==="hsv")){ae=(aG==="hsl")}break;case"changeLightness":if(ab(aG)){a2=aG}aA=a2?Math.max(a6*0.05,3):0;break;case"changeSaturation":if(ab(aG)){a3=aG}break;case"saturation":if(ag(aG)){aT=aG}break;case"lightness":case"brightness":if(ag(aG)){aw=aG}break;case"useKeys":if(ab(aG)){a1=aG}break;case"hueKeyDelta":if(ag(aG)){U=aG}break;case"saturationKeyDelta":if(ag(aG)){aS=aG}break;case"lightnessKeyDelta":if(ag(aG)){at=aG}break;case"hueKeyCodeUp":if(ag(aG)){T=aG}break;case"hueKeyCodeDown":if(ag(aG)){S=aG}break;case"saturationKeyCodeUp":if(ag(aG)){aR=aG}break;case"saturationKeyCodeDown":if(ag(aG)){aQ=aG}break;case"lightnessKeyCodeUp":if(ag(aG)){ar=aG}break;case"lightnessKeyCodeDown":if(ag(aG)){aq=aG}break;case"shiftKeyFactor":if(ag(aG)){am=aG}break;case"thicknessHue":if(ag(aG)){aZ=aG}break;case"thicknessLuma":if(ag(aG)){aA=aG}break;case"hueKnobSize":if(ag(aG)){an=aG}break;case"shadowBlur":if(ag(aG)){aX=aG}break;case"hueKnobShadow":if(ab(aG)){Y=aG}break;case"showColorSpot":if(ab(aG)){aY=aG}break;case"tabable":if(ab(aG)){a=aG}break;case"colorSpotWidth":if(ag(aG)){q=aG}break;case"colorSpotBorder":if(ag(aG)){n=aG}break;case"colorSpotBorderColor":if(ah(aG)){p=aG}break;case"hueKnobColor":if(ah(aG)){W=aG}break;case"lightnessKnobColor":if(ah(aG)){au=aG}break;case"hueKnobColorSelected":if(ah(aG)){X=aG}break;case"lightnessKnobColorSelected":if(ah(aG)){av=aG}break;case"lightnessRingClickable":if(ab(aG)){ap=aG}break;case"rgb":if(Array.isArray(aG)&&aG.length===3){var f=ae?aO(aG[0],aG[1],aG[2]):aP(aG[0],aG[1],aG[2]);d=f.h;aT=f.s;aw=f.l}break}}this.onchange=ac(aH.onChange)?aH.onChange:null;j.id=(B.id||"hueWheel")+"_canvas";if(a){j.tabIndex=0}D.width=M;D.height=2;L.addColorStop(0,"#f00");L.addColorStop(0.17,"#ff0");L.addColorStop(0.33,"#0f0");L.addColorStop(0.5,"#0ff");L.addColorStop(0.67,"#00f");L.addColorStop(0.83,"#f0f");L.addColorStop(1,"#f00");E.fillStyle=L;E.fillRect(0,0,M,1);L=E.createLinearGradient(0,0,M,0);L.addColorStop(0,"#000");L.addColorStop(1,"#fff");E.fillStyle=L;E.fillRect(0,1,M,1);aa=E.getImageData(0,0,M,2);z=aa.data;F();B.innerHTML="";B.appendChild(j);aL();aU();if(aF){j.addEventListener("MSPointerDown",aC,!1);window.addEventListener("MSPointerMove",aD,!1);window.addEventListener("MSPointerUp",aE,!1)}else{j.addEventListener("mousedown",aC,!1);window.addEventListener("mousemove",aD,!1);window.addEventListener("mouseup",aE,!1);j.addEventListener("touchstart",aC,!1);j.addEventListener("touchmove",aD,!1);j.addEventListener("touchend",aE,!1)}if(a1){j.addEventListener("keydown",ak,!1)}function aC(g){K(g);j.style.cursor="default";G(!1);ad=s.isPointInPath(a7,a8);if(ad){af=!1;m();aM(!0);if(a2){aN(!1)}return !1}H(!1);ad=s.isPointInPath(a7,a8);if(ad){af=!0;m();aM(!1);if(a2){aN(!0)}return !1}var i=J(a7,a8),c=i.dist,b=i.angle;if(c>P-aZ*0.5&&c<P+aZ*0.5){d=b*aK;if(d<0){d+=360}m();aM(!1);if(a2){aN(!1)}aU()}else{if(ap&&c>ay-aA*0.5&&c<ay+aA*0.5){var h=b*aK-90;if(h<0){h+=360}aB.hsl(d,aT,h/360)}}return !1}function aD(g){K(g);var i=J(a7,a8),c=i.dist,b=i.angle,h;if(ad){if(!af){d=b*aK;if(d<0){d+=360}if(a3){if(c<0){c=0}if(c>P-ao){c=P-ao}aT=c/(P-ao)}}else{aw=((b+0.5*Math.PI)/aI+0.5)%1}a4();m();aM(!af);if(a2){aN(af)}aU()}else{G(!1);h=s.isPointInPath(a7,a8);if(h){j.style.cursor="pointer";return !1}H(!1);h=s.isPointInPath(a7,a8);if(h){j.style.cursor="pointer";return !1}if(c>P-aZ*0.5&&c<P+aZ*0.5){j.style.cursor="crosshair";return !1}j.style.cursor="default"}return !1}function aE(b){k(b);j.style.cursor="default";ad=!1;aL()}function ak(b){var i=b.charCode||b.keyCode,c=b.shiftKey?am:1,g=c*0.01,h=!1;switch(i){case T:d-=U*c;if(d<0){d+=360}h=!0;break;case S:d+=U*c;d%=360;h=!0;break;case aR:if(!a3){return}aT-=aS*g;h=!0;break;case aQ:if(!a3){return}aT+=aS*g;h=!0;break;case ar:if(!a2){return}aw+=at*g;h=!0;break;case aq:if(!a2){return}aw-=at*g;h=!0;break}if(h){k(b);aB.hsl(d,aT,aw)}}function K(b){k(b);var c=j.getBoundingClientRect(),g=b.targetTouches;ai=ac(g)&&(aF?b.pointerType===b.MSPOINTER_TYPE_TOUCH:!0);if(ai&&(g.length===1||(aF&&b.isPrimary))){a7=g[0].clientX;a8=g[0].clientY}else{a7=b.clientX;a8=b.clientY}a7-=c.left;a8-=c.top}function k(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}}function J(g,h){var b=g-t,c=h-u;return{dist:Math.sqrt(b*b+c*c),angle:Math.atan2(c,b)}}function aW(){P=(a6-aZ-aA*3-aX*(a2?1:2))*0.5+1;ay=(a6-aA-aX)*0.5+1;ax=aA*0.5;az=[t-1,u+ay];V=[t-aZ*0.5,u];ao=Math.max(a6*an,5)}function F(){var b,l,g,c,h;aW();s.clearRect(0,0,a6,O);j.width=j.height=a6;j.innerHTML="<h1>No HTML5 Canvas support. Please upgrade the browser.</h1>";s.lineWidth=aZ;if(aX>0){s.save();s.save();s.shadowColor=aH.shadowColor||"rgba(0, 0, 0, 1)";s.shadowBlur=aX;s.beginPath();s.arc(t,u,P,0,aI);s.closePath();s.stroke();s.restore();s.globalCompositeOperation="destination-out";s.beginPath();s.arc(t,u,P,0,aI);s.closePath();s.stroke();s.restore()}for(b=0,g=0,c=4/N;b<360;b+=N){l=(b+1)*v;h=b*c;s.strokeStyle="rgb("+z[h]+","+z[h+1]+","+z[h+2]+")";s.beginPath();s.arc(t,u,P,g,l+0.01);s.stroke();g=l}if(a2){s.lineWidth=aA;for(b=0,g=0,c=4/N;b<360;b+=N){l=(b+1)*v+A;h=(b+360)*c;s.strokeStyle="rgb("+z[h]+","+z[h+1]+","+z[h+2]+")";s.beginPath();s.arc(t,u,ay,g,l+0.01);s.stroke();g=l}}j.style.backgroundImage="url("+j.toDataURL()+")";s.clearRect(0,0,a6,O)}function aM(b){G(!0);if(Y){s.shadowColor=aH.shadowColor||"rgba(0, 0, 0, 1)";s.shadowBlur=aX}s.lineWidth=1;s.strokeStyle="#000";s.fillStyle=b?X:W;s.fill();if(Y){s.shadowColor="rgba(0, 0, 0, 0)";s.shadowBlur=0}s.stroke()}function G(b){s.setTransform(1,0,0,1,0,0);s.translate(t,u);s.rotate(d*v);s.translate(-t,-u);var c=t+ao+(P-aZ*0.5-ao)*(a3?aT:1);if(a3&&b){s.lineWidth=1;s.beginPath();s.moveTo(t,u-0.5);s.lineTo(t+P-aZ*0.5,u-0.5);s.strokeStyle="#000";s.stroke();s.beginPath();s.moveTo(t,u+0.5);s.lineTo(t+P-aZ*0.5,u+0.5);s.strokeStyle="#fff";s.stroke()}s.beginPath();s.moveTo(c-1,u);s.lineTo(c-ao,u-ao*0.7);s.lineTo(c-ao,u+ao*0.7);s.closePath()}function aN(b){H(!0,b);s.setTransform(1,0,0,1,0,0)}function H(b,c){s.setTransform(1,0,0,1,0,0);s.translate(t,u);s.rotate(aI*aw);s.translate(-t,-u);if(b){s.beginPath();s.arc(az[0],az[1],ax,0,aI);s.closePath();s.fillStyle="#000";s.fill();s.beginPath();s.arc(az[0],az[1],ax-1,0,aI);s.closePath();s.fillStyle=c?av:au;s.fill()}else{s.beginPath();s.arc(az[0],az[1],ax,0,aI);s.closePath()}}function aL(){m();aM(!1);if(a2){aN(!1)}}function m(){I();s.clearRect(0,0,a6,O);if(aY){var b=(P-aZ*0.5)*q;s.beginPath();s.arc(t,u,b,0,aI);s.closePath();s.fillStyle="rgb("+aJ+","+C+","+e+")";s.fill();s.lineWidth=n;s.strokeStyle=p;s.stroke()}}function I(){var b=ae?Q(d,aT,aw):R(d,aT,aw);aJ=b.r;C=b.g;e=b.b;a4()}function aU(){clearTimeout(a0);if(aB.onchange!==null){a0=setTimeout(aB.onchange({h:d%360,s:aT,l:aw,v:aw,r:aJ,g:C,b:e,x:a7,y:a8,isIE:aF,isTouch:ai}),12)}}function a4(){d%=360;aT=Math.max(0,Math.min(aT,1));aw=Math.max(0,Math.min(aw,1));var b=a5(aJ,C,e);aJ=b.r;C=b.g;e=b.b}function a5(i,h,c){i=(i+0.5)|0;h=(h+0.5)|0;c=(c+0.5)|0;i=Math.max(0,Math.min(i,255));h=Math.max(0,Math.min(h,255));c=Math.max(0,Math.min(c,255));return{r:i,g:h,b:c}}function R(c,x,a9){c/=60;var g=c|0,b=c-g,y=1-x,o=a9*y,r=a9*(y*b),l=a9*(y*(1-b)),w;switch(g){case 0:w=[a9,l,o];break;case 1:w=[r,a9,o];break;case 2:w=[o,a9,l];break;case 3:w=[o,r,a9];break;case 4:w=[l,o,a9];break;case 5:case 6:w=[a9,o,r];break}return{r:(w[0]*255+0.5)|0,g:(w[1]*255+0.5)|0,b:(w[2]*255+0.5)|0}}function Q(o,bb,x){var ba,i,c,a9,y;o/=360;if(bb===0){ba=i=c=x}else{function w(b,g,h){h%=1;if(h<0.166667){return b+(g-b)*h*6}if(h<0.5){return g}if(h<0.666667){return b+(g-b)*(0.666667-h)*6}return b}a9=x<0.5?x*(1+bb):x+bb-x*bb;y=2*x-a9;ba=w(y,a9,o+0.333333);i=w(y,a9,o);c=w(y,a9,o-0.333333)}ba=(ba*255+0.5)|0;i=(i*255+0.5)|0;c=(c*255+0.5)|0;ba=Math.max(0,Math.min(ba,255));i=Math.max(0,Math.min(i,255));c=Math.max(0,Math.min(c,255));return{r:ba,g:i,b:c}}function aO(ba,o,c){ba/=255;o/=255;c/=255;var y=Math.max(ba,o,c),a9=Math.min(ba,o,c),i=(y-a9),w=0,bb=0,x=(y+a9)*0.5;if(y!==a9){if(x<0.5){bb=i/(y+a9)}else{bb=i/(2-y-a9)}if(ba===y){w=(o-c)/i}else{if(o===y){w=2+(c-ba)/i}else{w=4+(ba-o)/i}}}w*=60;if(w<0){w+=360}return{h:w,s:bb,l:x}}function aP(y,l,c){y/=255;l/=255;c/=255;var o,a9,ba,i,x=Math.min(y,Math.min(l,c)),w=Math.max(y,Math.max(l,c));if(x===w){ba=x;return{h:0,s:0,v:ba}}i=(y===x)?l-c:((c===x)?y-l:c-y);o=(y===x)?3:((c===x)?1:5);o=60*(o-i/(w-x));a9=(w-x)/w;ba=w;return{h:o,s:a9,v:ba}}this.hsl=function(b,o,g){if(!arguments.length){if(ae){return{h:d,s:aT,l:aw}}else{var i=R(d,aT,aw),c=aO(i.r,i.g,i.b);return{h:c.h,s:c.s,l:c.l}}}aV(b,o,g);return this};this.hsv=function(b,l,o){var i,g,c;if(!arguments.length){if(ae){i=Q(d,aT,aw);g=aP(i.r,i.g,i.b);return{h:g.h,s:g.s,v:g.v}}else{return{h:d,s:aT,v:aw}}}i=R(b,l,o);c=aO(i.r,i.g,i.b);aV(c.h,c.s,c.l);return this};function aV(b,g,c){d=b;aT=g;aw=c;a4();aL();aU()}this.rgb=function(l,h,c){if(!arguments.length){return{h:d,s:aT,l:aw,v:aw}}var o=a5(l,h,c);l=o.r;h=o.g;c=o.b;var i=(ae)?aO(l,h,c):aP(l,h,c);d=i.h;aT=i.s;aw=i.l||i.v;a4();aL();aU();return this};function ah(b){return(typeof b==="string")}function ab(b){return(typeof b==="boolean")}function ag(b){return(typeof b==="number")}function ac(b){return(typeof b!=="undefined")}this.showColor=function(b){if(!arguments.length||!ab(b)){return aY}aY=b;aL();return this};this.changeLightness=function(b){if(!arguments.length||!ab(b)){return a2}a2=b;aA=a2?(aH.lumaThickness||Math.max(a6*0.05,3)):0;F();aL();return this};this.changeSaturation=function(b){if(!arguments.length||!ab(b)){return a3}a3=b;F();aL();return this};this.thicknessHue=function(b){if(!arguments.length||!ag(b)){return aZ}if(b<3){b=3}if(b>a6*0.3){b=(a6*0.3)|0}aZ=b;F();aL();return this};this.thicknessLightness=function(b){if(!arguments.length||!ag(b)){return aZ}if(b<3){b=3}if(b>a6*0.2){b=(a6*0.2)|0}aA=b;F();aL();return this};this.colorSpotRadius=function(b){if(!arguments.length||!ag(b)){return q}q=b;F();aL();return this};this.colorSpace=function(h){if(!arguments.length||(h!=="hsl"&&h!=="hsv")){return ae?"hsl":"hsv"}var g,b;if(ae&&h==="hsv"){g=Q(d,aT,aw);b=aP(g.r,g.g,g.b);d=b.h;aT=b.s;aw=b.v}else{if(!ae&&h==="hsl"){g=R(d,aT,aw);b=aO(g.r,g.g,g.b);d=b.h;aT=b.s;aw=b.l}}ae=(h==="hsl");aL();aU();return this};this.lightnessClickable=function(b){if(!arguments.length||!ab(b)){return ap}ap=b;return this};this.rgb2hsl=aO;this.rgb2hsv=aP;this.hsv2rgb=R;this.hsl2rgb=Q};